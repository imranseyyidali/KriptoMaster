@{
    ViewData["Title"] = "ECC ile Şifreleme";
}

<style>
    .ecc-bg-row {
        background: rgba(10, 30, 10, 0.85);
        border-radius: 30px;
        padding: 2.5rem 1rem;
        margin-top: 2.5rem;
        display: flex;
        justify-content: center;
    }
    .ecc-row {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 2.5rem;
        width: 100%;
        max-width: 1300px;
    }
    .ecc-col {
        flex: 1 1 420px;
        max-width: 600px;
        min-width: 340px;
        display: flex;
        flex-direction: column;
        align-items: stretch;
        min-height: 520px;
    }
    .keygen-section {
        background: rgba(20, 40, 20, 0.97);
        border: 2.5px solid #00ff41;
        border-radius: 30px 0 0 30px;
        box-shadow: 0 0 32px 0 #00ff4133, 0 0 0 1.5px #00ff41;
        text-align: center;
        padding: 2.2rem 1.5rem 1.5rem 1.5rem;
        display: flex;
        flex-direction: column;
        justify-content: center;
        height: 100%;
    }
    .keygen-section .section-title {
        font-size: 1.5rem;
        font-weight: bold;
        color: #00ff41;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        margin-bottom: 1.2rem;
    }
    .keygen-section .btn {
        font-size: 1.1rem;
        padding: 0.5rem 1.5rem;
        margin-bottom: 1.2rem;
        border-radius: 8px;
    }
    .keygen-section textarea {
        font-size: 0.95rem;
        margin-bottom: 0.7rem;
    }
    .ecc-card {
        background: rgba(20, 40, 20, 0.97);
        border: 2.5px solid #00ff41;
        border-radius: 0 30px 30px 0;
        box-shadow: 0 0 32px 0 #00ff4133, 0 0 0 1.5px #00ff41;
        display: flex;
        flex-direction: column;
        justify-content: center;
        height: 100%;
    }
    .ecc-card .card-header {
        background: linear-gradient(90deg, #00ff41 80%, #1a1a1a 100%);
        color: #111;
        border-radius: 0 30px 0 0;
        font-size: 2rem;
        font-weight: 900;
        letter-spacing: 1px;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.7rem;
        box-shadow: 0 0 12px #00ff4130;
        font-family: 'Orbitron', monospace;
        min-height: 70px;
    }
</style>

<div class="ecc-bg-row">
    <div class="ecc-row">
        <div class="ecc-col">
            <div class="keygen-section">
                <div class="section-title">
                    <svg class="me-2" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 8a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z"/>
                    </svg>
                    Anahtar Çifti Oluştur (PEM)
                </div>
                <form method="post" action="@Url.Action("GenerateKeys", "Ecc")" style="display:inline;">
                    <button type="submit" class="btn btn-outline-success">
                        <svg class="me-2" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 8a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z"/>
                        </svg>
                        Anahtar Çifti Oluştur (PEM)
                    </button>
                </form>
                @if (!string.IsNullOrWhiteSpace(ViewBag.PublicKey as string))
                {
                    <div class="mt-3">
                        <label class="form-label text-success fw-bold">Açık Anahtar (PEM)</label>
                        <textarea class="form-control bg-dark text-success border-success mb-2" rows="3" readonly>@ViewBag.PublicKey</textarea>
                        <label class="form-label text-success fw-bold">Özel Anahtar (PEM)</label>
                        <textarea class="form-control bg-dark text-success border-success" rows="3" readonly>@ViewBag.PrivateKey</textarea>
                    </div>
                }
            </div>
        </div>
        <div class="ecc-col">
            <div class="ecc-card">
                <div class="card-header bg-success text-white text-center py-3">
                    <h2 class="mb-0">
                        <svg class="me-2" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
                        </svg>
                        ECC ile Şifreleme
                    </h2>
                </div>
                <div class="card-body p-4">
                    <form method="post" asp-action="Encrypt" class="needs-validation" novalidate>
                        <div class="mb-4">
                            <label for="plainText" class="form-label text-success fw-bold">Şifrelenecek Metin</label>
                            <textarea class="form-control bg-dark text-light border-success" id="plainText" name="plainText" rows="4" placeholder="Şifrelenecek metni girin..." style="resize: vertical;">@(ViewBag.InputPlainText ?? string.Empty)</textarea>
                        </div>
                        <div class="mb-4">
                            <label for="publicKey" class="form-label text-success fw-bold">Açık Anahtar (PEM)</label>
                            <textarea class="form-control bg-dark text-light border-success" id="publicKey" name="publicKey" rows="4" placeholder="Açık anahtarı buraya yapıştırın..." style="resize: vertical;">@(ViewBag.PublicKey ?? string.Empty)</textarea>
                        </div>
                        <div class="d-grid gap-2 mb-3">
                            <button type="submit" class="btn btn-success btn-lg">
                                <svg class="me-2" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M16 8a8 8 0 1 1-16 0A8 8 0 0 1 16 8zM8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zm3.293 4.707a1 1 0 0 1 0 1.414l-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 1 1 1.414-1.414L7 7.586l3.293-3.293a1 1 0 0 1 1.414 0z"/>
                                </svg>
                                Şifrele
                            </button>
                        </div>
                    </form>
                    @if (ViewBag.EncryptedText != null)
                    {
                        <div class="mt-4">
                            <div class="alert alert-success border-0">
                                <h5 class="alert-heading text-success">Şifrelenmiş Sonuç</h5>
                                <div class="bg-dark p-3 rounded border border-success">
                                    <code class="text-success fs-6" style="word-break: break-all;">@ViewBag.EncryptedText</code>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Form validation
    const forms = document.querySelectorAll('.needs-validation');
    Array.from(forms).forEach(form => {
        form.addEventListener('submit', event => {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add('was-validated');
        }, false);
    });
});
</script> 